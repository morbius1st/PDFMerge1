<Window
		x:Class="Sylvester.SavedFolders.SavedFoldersWin"
		xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:app="clr-namespace:Sylvester"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		xmlns:local="clr-namespace:Sylvester.SavedFolders"
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:sys="clr-namespace:System;assembly=mscorlib"
		xmlns:user="clr-namespace:Sylvester.UserControls"
		x:Name="SavedFolderWin"
		Title="{Binding ElementName=SavedFolderWin,
										Path=Title}"
		Width="800"
		Height="450"
		MinWidth="{Binding ElementName=SavedFolderWin,
											 Path=WidthMin}"
		MinHeight="{Binding ElementName=SavedFolderWin,
												Path=HeightMin}"
		DataContext="{Binding ElementName=SavedFolderWin,
													Path=SavedFolders}"
		Initialized="SavedFolderWin_Initialized"
		Loaded="SavedFolderWin_Loaded"
		mc:Ignorable="d"
		Background="#333333"
		>
	<!--
		Width="{Binding ElementName=SavedFolderWin,
		Path=WidthMin,
		FallbackValue={x:Static local:SavedFoldersWin.MIN_WIDTH}}"
		Height="{Binding ElementName=SavedFolderWin,
		Path=HeightMin,
		FallbackValue={x:Static local:SavedFoldersWin.MIN_HEIGHT}}"
	-->

	<Window.Resources>

		<ResourceDictionary>

			<local:IconConverter x:Key="icv" />

			<SolidColorBrush x:Key="btnBkg">LightGray</SolidColorBrush>

			<sys:Double x:Key="Height.Bottom.Row">80</sys:Double>

			<Style
					x:Key="lbl"
					TargetType="Label"
					>
				<Setter Property="Foreground" Value="White" />
				<Setter Property="Margin" Value="0" />
				<Setter Property="Padding" Value="0,0,0,3" />
			</Style>


			<Style
					x:Key="label"
					TargetType="Label"
					BasedOn="{StaticResource lbl}"
					>
				<Setter Property="Width" Value="Auto" />

			</Style>

			<Style
					x:Key="label.value"
					TargetType="Label"
					BasedOn="{StaticResource lbl}"
					>
				<Setter Property="Background" Value="#444444" />
			</Style>


			<Style
					x:Key="TextBoxBase"
					TargetType="TextBox"
					>
				<Setter Property="Background" Value="#222222" />
				<Setter Property="Foreground" Value="White" />
				<Setter Property="HorizontalAlignment" Value="Stretch" />

				<Setter Property="Padding" Value="0" />
			</Style>

			<Style
					x:Key="TextBox.Edit"
					TargetType="TextBox"
					BasedOn="{StaticResource TextBoxBase}"
					>
				<Setter Property="Margin" Value="0,1,0,.5" />
			</Style>
		</ResourceDictionary>
	</Window.Resources>
	<Grid>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="180" />
			<ColumnDefinition Width="180" />
			<ColumnDefinition Width="*" MinWidth="260" />
			<ColumnDefinition Width="Auto" />
		</Grid.ColumnDefinitions>
		<Grid.RowDefinitions>
			<RowDefinition />
			<RowDefinition Height="Auto" MinHeight="60" MaxHeight="{StaticResource Height.Bottom.Row}" />
		</Grid.RowDefinitions>

		<StackPanel
				Grid.Column="2"
				Grid.Row="1"
				Margin="0,10,0,0"
				HorizontalAlignment="Right"
				VerticalAlignment="Bottom"
				Orientation="Horizontal"
				>

			<Button
					Name="btnDebugx"
					Content="Debug x"
					HorizontalAlignment="Right"
					Click="BtnDebugx_OnClick"
					Style="{StaticResource Button.Style.Standard}"
					/>

			<Button
					Name="btnDebug"
					Content="Debug"
					HorizontalAlignment="Right"
					Click="BtnDebug_OnClick"
					Style="{StaticResource Button.Style.Standard}"
					/>


			<Button
					Name="btnAddFav"
					Content="Add Fav"
					HorizontalAlignment="Right"
					Click="BtnAddFav_OnClick"
					Style="{StaticResource Button.Style.Standard}"
					/>


			<Button
					Name="btnDone"
					Content="Done"
					HorizontalAlignment="Right"
					Click="BtnDone_OnClick"
					Style="{StaticResource Button.Style.Standard}"
					/>

		</StackPanel>


		<Grid
				Grid.Column="2"
				Grid.Row="0"
				Margin="5,5,5,5"
				VerticalAlignment="Stretch"
				>
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto" />
				<RowDefinition Height="Auto" />
			</Grid.RowDefinitions>

			<StackPanel
					Grid.Row="0"
					Margin="0,0,0,15"
					Orientation="Vertical"
					>

				<StackPanel
						HorizontalAlignment="Stretch"
						Orientation="Horizontal"
						Background="#395482CD"
						>
					<Label
							Content="Project information"
							HorizontalAlignment="Left"
							Style="{StaticResource label}"
							/>
				</StackPanel>

				<StackPanel
						Margin="0,5,0,0"
						Orientation="Horizontal"
						>
					<Label
							Content="Icon"
							Margin="0,-2,20,0"
							Style="{StaticResource label}"
							/>

					<Button
							x:Name="FolderProject"
							Padding="0"
							Background="Transparent"
							BorderThickness="0"
							BorderBrush="Transparent"

							Click="FolderProject_OnClick"
							>
						 <Viewbox 
						 		Width="36" 
						 		Height="24" 
						 		HorizontalAlignment="Left" 
						 		> 
						 	<ContentPresenter> 
						 		<ContentPresenter.Content> 
						 			<MultiBinding Converter="{StaticResource icv}"
											FallbackValue="{StaticResource Folder-Project-01}"
											> 
						 				<Binding Source="{StaticResource Folder-Project-Icons}" /> 
						 				<Binding 
						 						ElementName="SavedFolderWin" 
												Path="ProjectFolderIndex" 
						 						/> 
						 			</MultiBinding> 
						 		</ContentPresenter.Content> 
						 	</ContentPresenter> 
						 
						 </Viewbox> 
						<Button.Style>
							<Style TargetType="Button">
								<Setter Property="Template">
									<Setter.Value>
										<ControlTemplate TargetType="Button">
											<Border
													x:Name="BDR"
													CornerRadius="3"
													Background="Transparent"
													BorderThickness="2"
													BorderBrush="Transparent"
													>
												<ContentPresenter
														x:Name="contentPresenter"
														Content="{TemplateBinding Content}"
														Margin="{TemplateBinding Padding}"
														HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
														VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
														ContentTemplate="{TemplateBinding ContentTemplate}"
														>
												</ContentPresenter>
											</Border>
											<ControlTemplate.Triggers>
												<Trigger Property="IsMouseOver" Value="True">
													<Setter TargetName="BDR" Property="BorderBrush" Value="Red" />
												</Trigger>
											</ControlTemplate.Triggers>
										</ControlTemplate>
									</Setter.Value>
								</Setter>

							</Style>
						</Button.Style>
					</Button>
					

				</StackPanel>


				<DockPanel
						Margin="0,0,0,5"
						HorizontalAlignment="Stretch"
						>
					<Label
							Content="Name"
							DockPanel.Dock="Top"
							Style="{StaticResource label}"
							/>
					<TextBox
							x:Name="lblName"
							DockPanel.Dock="Left"
							Text="{Binding ElementName=SavedFolderWin,
														 Path=SelectedSavedFolderProject.Name,
														 FallbackValue=''}"
							Style="{StaticResource TextBox.Edit}"
							/>
				</DockPanel>

			</StackPanel>

			<StackPanel
					Grid.Row="1"
					Orientation="Vertical"
					>
				<StackPanel
						HorizontalAlignment="Stretch"
						Orientation="Horizontal"
						Background="#395482CD"
						>
					<Label
							Content="Folder Pair information"
							HorizontalAlignment="Left"
							Style="{StaticResource label}"
							/>
				</StackPanel>

				<StackPanel
						Margin="0,5,0,0"
						Orientation="Horizontal"
						>
					<Label
							Content="Icon"
							Margin="0,-2,20,0"
							Style="{StaticResource label}"
							/>


					<Button
							x:Name="FolderPair"
							Padding="0"
							Background="Transparent"
							BorderThickness="0"
							BorderBrush="Transparent"
							Click="FolderPair_OnClick"
							>
						<Viewbox
								Width="36"
								Height="24"
								HorizontalAlignment="Left"
								>
							<ContentPresenter>
								<ContentPresenter.Content>
									<MultiBinding Converter="{StaticResource icv}"
											FallbackValue="{StaticResource Folder-Pair-05}"
											>
										<Binding Source="{StaticResource Folder-Pair-Icons}" />
										<Binding
												ElementName="SavedFolderWin"
												Path="PairFolderIndex"
												/>
									</MultiBinding>
								</ContentPresenter.Content>
							</ContentPresenter>

						</Viewbox>
						<Button.Style>
							<Style TargetType="Button">
								<Setter Property="Template">
									<Setter.Value>
										<ControlTemplate TargetType="Button">
											<Border
													x:Name="BDR"
													CornerRadius="3"
													Background="Transparent"
													BorderThickness="2"
													BorderBrush="Transparent"
													>
												<ContentPresenter
														x:Name="contentPresenter"
														Content="{TemplateBinding Content}"
														Margin="{TemplateBinding Padding}"
														HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
														VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
														ContentTemplate="{TemplateBinding ContentTemplate}"
														/>
											</Border>
											<ControlTemplate.Triggers>
												<Trigger Property="IsMouseOver" Value="True">
													<Setter TargetName="BDR" Property="BorderBrush" Value="Red" />
												</Trigger>
											</ControlTemplate.Triggers>
										</ControlTemplate>
									</Setter.Value>
								</Setter>

							</Style>
						</Button.Style>
					</Button>

				</StackPanel>

				<DockPanel HorizontalAlignment="Stretch">
					<Label
							Content="Name"
							DockPanel.Dock="top"
							Style="{StaticResource label}"
							/>
					<TextBox
							x:Name="lblPairName"
							Margin="0,0,0,3"
							DockPanel.Dock="Left"
							Text="{Binding ElementName=SavedFolderWin,
														 Path=SelectedFolderPair.Name,
														 FallbackValue=''}"
							Style="{StaticResource TextBox.Edit}"
							/>
				</DockPanel>

				<DockPanel Margin="0,0,0,3">
					<Label
							Content="Current Folder"
							Margin="0,0,0,3"
							DockPanel.Dock="top"
							Style="{StaticResource label}"
							/>

					<!-- <ScrollViewer -->
					<!-- 		x:Name="CurrentScrollBar" -->
					<!-- 		HorizontalScrollBarVisibility="Visible" -->
					<!-- 		VerticalScrollBarVisibility="Hidden" -->
					<!-- 		Template="{DynamicResource ScrollViewerNarrow}" -->
					<!-- 		> -->

						<user:FolderRoute
								x:Name="FolderRouteCurrent"
								Margin="0,0,0,4"
								DockPanel.Dock="Left"
								ProposedObliqueButtonType="3"
								Style="{StaticResource FolderRoute.Style}"
								/>
								<!-- Height="24" -->
								<!-- ObliqueButtonHeight="14" -->
								<!-- TextFontSize="10" -->

				</DockPanel>

				<DockPanel Margin="0,0,0,3">
					<Label
							Content="Revision Folder"
							DockPanel.Dock="top"
							Margin="0,0,0,3"
							Style="{StaticResource label}"
							/>

					<!-- <ScrollViewer x:Name="RevisionScrollBar" -->
					<!-- 		MinWidth="8" -->
					<!-- 		MinHeight="8" -->
					<!-- 		HorizontalScrollBarVisibility="Visible" -->
					<!-- 		VerticalScrollBarVisibility="Hidden" -->
					<!-- 		Template="{DynamicResource ScrollViewerNarrow}"> -->

					<user:FolderRoute
							x:Name="FolderRouteRevision"
							DockPanel.Dock="Left"
							ProposedObliqueButtonType="3"
							Style="{StaticResource FolderRoute.Style}"
							/>
							<!-- Height="24" -->
							<!-- ObliqueButtonHeight="14" -->
							<!-- TextFontSize="10" -->

					<!-- </ScrollViewer> -->

					<!--  <TextBox  -->
					<!--  Text="{Binding ElementName=SavedFolderWin,  -->
					<!--  Path=SelectedFolderPair.Revision.GetFullPath,  -->
					<!--  Mode=TwoWay,  -->
					<!--  FallbackValue=''}"  -->
					<!--  Style="{StaticResource TextBox.Edit}"  -->
					<!--  />  -->
				</DockPanel>
			</StackPanel>

		</Grid>

		<Grid
				x:Name="DebugPanel"
				Grid.Column="3"
				Grid.Row="0"
				Margin="5"
				Width="110"
				HorizontalAlignment="Left"
				VerticalAlignment="Stretch"
				RowSpan="2"
				>

			<Grid.RowDefinitions>
				<RowDefinition Height="*" />
				<RowDefinition Height="*" />
				<RowDefinition Height="*" MaxHeight="{StaticResource Height.Bottom.Row}" />
			</Grid.RowDefinitions>

			<Grid.Style>
				<Style TargetType="Grid">
					<Setter Property="Visibility" Value="Visible" />
					<Style.Triggers>
						<DataTrigger Binding="{Binding ElementName=SavedFolderWin, Path=DebugMode}" Value="false">
							<Setter Property="Visibility" Value="Collapsed" />
						</DataTrigger>
					</Style.Triggers>
				</Style>
			</Grid.Style>


			<Border
					Grid.Row="0"
					Padding="3"
					DockPanel.Dock="Top"
					BorderThickness="1"
					BorderBrush="White"
					>
				<StackPanel
						HorizontalAlignment="Left"
						Orientation="Vertical"
						>
					<Label
							Content="Use Count"
							Style="{StaticResource label}"
							/>
					<Label
							Content="{Binding ElementName=SavedFolderWin,
																Path=SelectedSavedFolderProject.UseCount,
																FallbackValue=''}"
							Style="{StaticResource label.value}"
							/>
					<Label
							Content="Children"
							Margin="0,10,0,0"
							Style="{StaticResource label}"
							/>
					<Label
							Content="{Binding ElementName=SavedFolderWin,
																Path=SelectedSavedFolderProject.SavedFolderPairs.Count,
																FallbackValue=''}"
							Style="{StaticResource label.value}"
							/>
					<Label
							Content="Icon"
							Margin="0,10,0,0"
							Style="{StaticResource label}"
							/>
					<Label
							Content="{Binding ElementName=SavedFolderWin,
																Path=SelectedSavedFolderProject.Icon,
																FallbackValue=''}"
							Style="{StaticResource label.value}"
							/>
				</StackPanel>
			</Border>

			<Border
					Grid.Row="1"
					Padding="3"
					BorderThickness="1"
					BorderBrush="White"
					>
				<StackPanel
						HorizontalAlignment="Left"
						Orientation="Vertical"
						>

					<Label
							Content="Icon"
							Style="{StaticResource label}"
							/>
					<Label
							Content="{Binding ElementName=SavedFolderWin,
																Path=SelectedFolderPair.Icon,
																FallbackValue=''}"
							Style="{StaticResource label.value}"
							/>

				</StackPanel>
			</Border>


		</Grid>


		<TextBox
				x:Name="tbxMain"
				Grid.Column="0"
				Grid.Row="1"
				Grid.ColumnSpan="2"
				Margin="5,5,5,0"
				Height="{StaticResource Height.Bottom.Row}"
				HorizontalAlignment="Stretch"
				VerticalAlignment="Stretch"
				FontFamily="DejaVu Sans Mono"
				FontSize="9"
				HorizontalScrollBarVisibility="Visible"
				Text="TextBox"
				TextWrapping="Wrap"
				VerticalScrollBarVisibility="Visible"
				Background="Transparent"
				Foreground="White"
				>
			<TextBox.Style>
				<Style TargetType="TextBox">
					<Setter Property="Visibility" Value="Visible" />
					<Style.Triggers>
						<DataTrigger Binding="{Binding ElementName=SavedFolderWin, Path=DebugMode}" Value="false">
							<Setter Property="Visibility" Value="Collapsed" />
						</DataTrigger>
					</Style.Triggers>
				</Style>
			</TextBox.Style>
		</TextBox>

		<ListView
				x:Name="lvProjects"
				Grid.Column="0"
				Grid.Row="0"
				DataContext="{Binding ElementName=SavedFolderWin,
															Path=SavedFolders}"
				SelectedValue="{Binding ElementName=SavedFolderWin,
																Path=SelectedSavedFolderProject}"
				SelectionMode="Single"
				Background="#333333"
				ItemTemplate="{DynamicResource DataTemplate1}"
				ItemsSource="{Binding}"
				>
			<!--  ItemsSource="{Binding SavedFolders}"  -->
			<ListView.Resources>
				<DataTemplate
						x:Key="DataTemplate1"
						DataType="local:SavedFolderProject"
						>
					<StackPanel Orientation="Horizontal">
						<Label
								Content="{Binding Name,
																	FallbackValue=''}"
								Foreground="White"
								/>
					</StackPanel>
				</DataTemplate>
			</ListView.Resources>
		</ListView>
		<!--    -->


		<ListView
				x:Name="lvFolders"
				Grid.Column="1"
				Grid.Row="0"
				DataContext="{Binding ElementName=SavedFolderWin,
															Path=FolderPairs}"
				SelectedValue="{Binding ElementName=SavedFolderWin,
																Path=SelectedFolderPair}"
				SelectionMode="Single"
				Background="#333333"
				ItemTemplate="{DynamicResource DataTemplate2}"
				ItemsSource="{Binding}"
				>
			<!--  ItemsSource="{Binding SavedFolders}"  -->
			<ListView.Resources>
				<DataTemplate
						x:Key="DataTemplate2"
						DataType="local:SavedFolderPair"
						>
					<StackPanel Orientation="Horizontal">
						<Label
								Content="{Binding Name,
																	FallbackValue=''}"
								Foreground="White"
								/>
					</StackPanel>
				</DataTemplate>
			</ListView.Resources>
		</ListView>

	</Grid>
</Window>
