<Window
		x:Class="Sylvester.SavedFolders.SavedFoldersWin"
		xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:app="clr-namespace:Sylvester"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		xmlns:local="clr-namespace:Sylvester.SavedFolders"
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:sys="clr-namespace:System;assembly=mscorlib"
		x:Name="SavedFolderWin"
		Title="{Binding ElementName=SavedFolderWin,
										Path=Title}"
		Width="{Binding ElementName=SavedFolderWin,
										Path=MIN_WIDTH,
										FallbackValue=800}"
		Height="{Binding ElementName=SavedFolderWin,
										 Path=MIN_HEIGHT,
										 FallbackValue=450}"
		MinWidth="{Binding ElementName=SavedFolderWin,
											 Path=MIN_WIDTH}"
		MinHeight="{Binding ElementName=SavedFolderWin,
												Path=MIN_HEIGHT}"
		DataContext="{Binding ElementName=SavedFolderWin,
													Path=SavedFolders}"
		Initialized="SavedFolderWin_Initialized"
		Loaded="SavedFolderWin_Loaded"
		mc:Ignorable="d"
		Background="#333333"
		>

	<Window.Resources>

		<ResourceDictionary>

			<PropertyPath x:Key="p1">[folder1]</PropertyPath>



			<local:IconConverter x:Key="icv"/>


			<SolidColorBrush x:Key="btnBkg">LightGray</SolidColorBrush>

			<sys:Double x:Key="Height.Bottom.Row">80</sys:Double>

			<Style
					x:Key="lbl"
					TargetType="Label"
					>
				<Setter Property="Foreground" Value="White" />
				<Setter Property="Margin" Value="0" />
				<Setter Property="Padding" Value="0,0,0,3" />
			</Style>


			<Style
					x:Key="label"
					TargetType="Label"
					BasedOn="{StaticResource lbl}"
					>
				<Setter Property="Width" Value="100" />

			</Style>

			<Style
					x:Key="label.value"
					TargetType="Label"
					BasedOn="{StaticResource lbl}"
					>
				<Setter Property="Background" Value="#444444" />
			</Style>


			<Style
					x:Key="TextBoxBase"
					TargetType="TextBox"
					>
				<Setter Property="Background" Value="#222222" />
				<Setter Property="Foreground" Value="White" />

				<Setter Property="Padding" Value="0" />
				<Setter Property="HorizontalAlignment" Value="Stretch" />
			</Style>

			<Style
					x:Key="TextBox.Edit"
					TargetType="TextBox"
					BasedOn="{StaticResource TextBoxBase}"
					>
				<Setter Property="Margin" Value="0,1,0,.5" />
			</Style>
		</ResourceDictionary>
	</Window.Resources>
	<Grid>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="180" />
			<ColumnDefinition Width="180" />
			<ColumnDefinition Width="*" MinWidth="260" />
			<ColumnDefinition Width="Auto" />
		</Grid.ColumnDefinitions>
		<Grid.RowDefinitions>
			<RowDefinition />
			<RowDefinition Height="Auto" MinHeight="60" MaxHeight="{StaticResource Height.Bottom.Row}" />
		</Grid.RowDefinitions>

		<StackPanel
				Grid.Column="2"
				Grid.Row="1"
				Margin="0,10,0,0"
				HorizontalAlignment="Right"
				VerticalAlignment="Bottom"
				Orientation="Horizontal"
				>

			<Button
					Name="btnDebugx"
					Content="Debug x"
					HorizontalAlignment="Right"
					Click="BtnDebugx_OnClick"
					Style="{StaticResource Button.Style.Standard}"
					/>

			<Button
					Name="btnDebug"
					Content="Debug"
					HorizontalAlignment="Right"
					Click="BtnDebug_OnClick"
					Style="{StaticResource Button.Style.Standard}"
					/>


			<Button
					Name="btnAddFav"
					Content="Add Fav"
					HorizontalAlignment="Right"
					Click="BtnAddFav_OnClick"
					Style="{StaticResource Button.Style.Standard}"
					/>


			<Button
					Name="btnDone"
					Content="Done"
					HorizontalAlignment="Right"
					Click="BtnDone_OnClick"
					Style="{StaticResource Button.Style.Standard}"
					/>

		</StackPanel>


		<Grid
				Grid.Column="2"
				Grid.Row="0"
				Margin="5,5,5,5"
				VerticalAlignment="Stretch"
				>
			<Grid.RowDefinitions>
				<RowDefinition Height="*" />
				<RowDefinition Height="*" />
			</Grid.RowDefinitions>

			<StackPanel
					Grid.Row="0"
					Orientation="Vertical"
					>
				<Label
						Content="Project information"
						Width="Auto"
						HorizontalAlignment="Left"
						Style="{StaticResource label}"
						/>




				<DockPanel HorizontalAlignment="Stretch">
					<Label
							Content="Name"
							DockPanel.Dock="Left"
							Style="{StaticResource label}"
							/>
					<TextBox
							x:Name="lblName"
							DockPanel.Dock="Left"
							Text="{Binding ElementName=SavedFolderWin,
														 Path=SelectedSavedFolderProject.Name,
														 FallbackValue=''}"
							Style="{StaticResource TextBox.Edit}"
							/>
				</DockPanel>
				<!-- -->
				<!-- <Viewbox -->
				<!-- 		Width="20" -->
				<!-- 		Height="20" -->
				<!-- 		HorizontalAlignment="Left" -->
				<!-- 		> -->
				<!-- 	<ContentPresenter Content="{Binding Source={StaticResource iconx}, Path={StaticResource p1}}"> -->
				<!-- 	</ContentPresenter> -->
				<!-- </Viewbox> -->

				<Viewbox
						Width="20"
						Height="20"
						HorizontalAlignment="Left"
						>
					<ContentPresenter Height="20" Width="20">
						<ContentPresenter.Content>
							<MultiBinding Converter="{StaticResource icv}">
								<Binding Source="{StaticResource iconx}"/>
								<Binding ElementName="SavedFolderWin" Path="x"/>
							</MultiBinding>
						</ContentPresenter.Content>
					</ContentPresenter>
				</Viewbox>


			</StackPanel>

			<StackPanel
					Grid.Row="1"
					Orientation="Vertical"
					>
				<Label
						Content="Folder Pair information"
						Width="Auto"
						HorizontalAlignment="Left"
						Style="{StaticResource label}"
						/>

				<DockPanel HorizontalAlignment="Stretch">
					<Label
							Content="Name"
							DockPanel.Dock="Left"
							Style="{StaticResource label}"
							/>
					<TextBox
							x:Name="lblPairName"
							DockPanel.Dock="Left"
							Text="{Binding ElementName=SavedFolderWin,
														 Path=SelectedFolderPair.Name,
														 FallbackValue=''}"
							Style="{StaticResource TextBox.Edit}"
							/>
				</DockPanel>

				<DockPanel>
					<Label
							Content="Current Folder"
							Style="{StaticResource label}"
							/>

					<TextBox
							Margin="0,1,0,.5"
							Padding="0"
							Text="{Binding ElementName=SavedFolderWin,
														 Path=SelectedFolderPair.Current.GetFullPath,
														 Mode=TwoWay,
														 FallbackValue=''}"
							Background="#222222"
							Foreground="White"
							/>

				</DockPanel>

				<DockPanel HorizontalAlignment="Stretch">
					<Label
							Content="Revision Folder"
							Style="{StaticResource label}"
							/>

					<TextBox
							Text="{Binding ElementName=SavedFolderWin,
														 Path=SelectedFolderPair.Revision.GetFullPath,
														 Mode=TwoWay,
														 FallbackValue=''}"
							Style="{StaticResource TextBox.Edit}"
							/>
				</DockPanel>
			</StackPanel>

		</Grid>

		<Grid
				x:Name="DebugPanel"
				Grid.Column="3"
				Grid.Row="0"
				Margin="5"
				Width="110"
				HorizontalAlignment="Left"
				VerticalAlignment="Stretch"
				RowSpan="2"
				>

			<Grid.RowDefinitions>
				<RowDefinition Height="*" />
				<RowDefinition Height="*" />
				<RowDefinition Height="*" MaxHeight="{StaticResource Height.Bottom.Row}" />
			</Grid.RowDefinitions>

			<Grid.Style>
				<Style TargetType="Grid">
					<Setter Property="Visibility" Value="Visible">
					</Setter>
					<Style.Triggers>
						<DataTrigger Binding="{Binding ElementName=SavedFolderWin, Path=DebugMode}" Value="false">
							<Setter Property="Visibility" Value="Collapsed">
							</Setter>
						</DataTrigger>
					</Style.Triggers>
				</Style>
			</Grid.Style>


			<Border
					Grid.Row="0"
					Padding="3"
					DockPanel.Dock="Top"
					BorderThickness="1"
					BorderBrush="White"
					>
				<StackPanel
						HorizontalAlignment="Left"
						Orientation="Vertical"
						>
					<Label
							Content="Use Count"
							Style="{StaticResource label}"
							/>
					<Label
							Content="{Binding ElementName=SavedFolderWin,
																Path=SelectedSavedFolderProject.UseCount,
																FallbackValue=''}"
							Style="{StaticResource label.value}"
							/>
					<Label
							Content="Children"
							Margin="0,10,0,0"
							Style="{StaticResource label}"
							/>
					<Label
							Content="{Binding ElementName=SavedFolderWin,
																Path=SelectedSavedFolderProject.SavedFolderPairs.Count,
																FallbackValue=''}"
							Style="{StaticResource label.value}"
							/>
					<Label
							Content="Icon"
							Margin="0,10,0,0"
							Style="{StaticResource label}"
							/>
					<Label
							Content="{Binding ElementName=SavedFolderWin,
																Path=SelectedSavedFolderProject.Icon,
																FallbackValue=''}"
							Style="{StaticResource label.value}"
							/>
				</StackPanel>
			</Border>

			<Border
					Grid.Row="1"
					Padding="3"
					BorderThickness="1"
					BorderBrush="White"
					>
				<StackPanel
						HorizontalAlignment="Left"
						Orientation="Vertical"
						>

					<Label
							Content="Icon"
							Style="{StaticResource label}"
							/>
					<Label
							Content="{Binding ElementName=SavedFolderWin,
																Path=SelectedFolderPair.Icon,
																FallbackValue=''}"
							Style="{StaticResource label.value}"
							/>

				</StackPanel>
			</Border>


		</Grid>


		<TextBox
				x:Name="tbxMain"
				Grid.Column="0"
				Grid.Row="1"
				Grid.ColumnSpan="2"
				Margin="5,5,5,0"
				Height="{StaticResource Height.Bottom.Row}"
				HorizontalAlignment="Stretch"
				VerticalAlignment="Stretch"
				FontFamily="DejaVu Sans Mono"
				FontSize="9"
				HorizontalScrollBarVisibility="Visible"
				Text="TextBox"
				TextWrapping="Wrap"
				VerticalScrollBarVisibility="Visible"
				Background="Transparent"
				Foreground="White"
				>
			<TextBox.Style>
				<Style TargetType="TextBox">
					<Setter Property="Visibility" Value="Visible" />
					<Style.Triggers>
						<DataTrigger Binding="{Binding ElementName=SavedFolderWin, Path=DebugMode}" Value="false">
							<Setter Property="Visibility" Value="Collapsed" />
						</DataTrigger>
					</Style.Triggers>
				</Style>
			</TextBox.Style>
		</TextBox>

		<ListView
				x:Name="lvProjects"
				Grid.Column="0"
				Grid.Row="0"
				DataContext="{Binding ElementName=SavedFolderWin,
															Path=SavedFolders}"
				SelectedValue="{Binding ElementName=SavedFolderWin,
																Path=SelectedSavedFolderProject}"
				SelectionMode="Single"
				Background="#333333"
				ItemTemplate="{DynamicResource DataTemplate1}"
				ItemsSource="{Binding}"
				>
			<!--  ItemsSource="{Binding SavedFolders}"  -->
			<ListView.Resources>
				<DataTemplate
						x:Key="DataTemplate1"
						DataType="{x:Type local:SavedFolderProject}"
						>
					<StackPanel Orientation="Horizontal">
						<Label
								Content="{Binding Name,
																	FallbackValue=''}"
								Foreground="White"
								/>
					</StackPanel>
				</DataTemplate>
			</ListView.Resources>
		</ListView>

		<ListView
				x:Name="lvFolders"
				Grid.Column="1"
				Grid.Row="0"
				DataContext="{Binding ElementName=SavedFolderWin,
															Path=FolderPairs}"
				SelectedValue="{Binding ElementName=SavedFolderWin,
																Path=SelectedFolderPair}"
				SelectionMode="Single"
				Background="#333333"
				ItemTemplate="{DynamicResource DataTemplate2}"
				ItemsSource="{Binding}"
				>
			<!--  ItemsSource="{Binding SavedFolders}"  -->
			<ListView.Resources>
				<DataTemplate
						x:Key="DataTemplate2"
						DataType="{x:Type local:SavedFolderPair}"
						>
					<StackPanel Orientation="Horizontal">
						<Label
								Content="{Binding Name,
																	FallbackValue=''}"
								Foreground="White"
								/>
					</StackPanel>
				</DataTemplate>
			</ListView.Resources>
		</ListView>

	</Grid>
</Window>
